<!DOCTYPE html>
<html>
	<head>
		<title>Project Template</title>
		<meta charset="UTF-8"/>
		<script type="text/javascript" src="./jquery/jquery.js"></script>			<!--for consistency and speed-->
		<script type="text/javascript" src="./jquery-ui/jquery-ui.js"></script>		<!--same as above-->
		<script type="text/javascript">
			var filename1, filename2
			//tasks: jquery UI animate, js read text, etc... 
			//day night cycle | if black to white jS PLEASE!!!!! //success
			function daynight(hrmin){ //time in minutes
				var time = (Number(String(hrmin).substr(0,2))*60)+Number(String(hrmin).substr(2,2))
				var percent = Math.abs(time/720-1);	
				var invvalue = (1 - percent)*255;
				var invbgColor = '#' + (Number(invvalue.toFixed())).toString(16) + (Number(invvalue.toFixed())).toString(16) + (Number(invvalue.toFixed())).toString(16);
				document.body.style["backgroundColor"] = invbgColor
				if (percent > 0.5){
					for (i = 0;i<document.getElementsByTagName("P").length;i++){
						document.getElementsByTagName("P")[i].style["color"] = "white" 
					}
				}
				else{
					for (i = 0;i<document.getElementsByTagName("P").length;i++){
						document.getElementsByTagName("P")[i].style["color"] = "black" 
					}
				}
			}
			//pushdown and fadeout the old messages | jQuery :( unavoidable
			//50% fade the old elements | jS PLEASE!!!!
			//clear old elements
			//read text files | AJAX I HATE YOU //success
			var resultreadfilearr = [];
			var resultreadfile = ""
			var j = 1;
			var text1, text2
			function readtxt(evt){
				if (window.XMLHttpRequest) { // Mozilla, Safari, ...
					reader = new XMLHttpRequest();
				} 
				else if (window.ActiveXObject) { // IE
					reader = new ActiveXObject("Microsoft.XMLHTTP");
				}
				reader.onreadystatechange = function(){
					console.log(reader.readyState) 
					console.log(reader.status)
					if (reader.readyState == 4 && (reader.status == 200 || reader.status == 304)) {  
						resultreadfile = reader.responseText; 
						resultreadfilearr = reader.responseText.split("\n"); //splits the text to readable ones

						for (var i = 0; i < resultreadfilearr.length; i++) { //parses the text into the document
							//setTimeout(function(){
								var vind = []
								if (resultreadfilearr[i].substr(0, 1) == "$"){
									document.getElementById("textanimation").insertAdjacentHTML('beforeend', "<input type=\"button\" class=\"" + j + "\" value=\"" + resultreadfilearr[i].substr(1,resultreadfilearr[i].length -1) + "\"></input>")
									console.log("j = " + j)
									vind[j] = i+1
									text1 = resultreadfilearr[vind[1]]
									text2 = resultreadfilearr[vind[2]]
									console.log(text1 + ", " + text2)
									if (j==1){
										console.log("j==1 pass")
										$(".1").one("click", function() {readtxt(text1);this.style.backgroundColor = "green";})
									}
									else if (j==2) {
										console.log("j==2 pass")
										$(".2").one("click", function() {readtxt(text2);this.style.backgroundColor = "green";})
										j=0
									}
									j++
									i++
								}

								else{
									document.getElementById("textanimation").insertAdjacentHTML('beforeend', "<p>" + resultreadfilearr[i] + "</p><hr />")
								}
								daynight(0)
							//},1000);
						}
					}
				}
				reader.open('GET', evt, true); 
				reader.send(null);

			}



			//when i need it
			$(function(){
				$('body, #textcontainer').fadeIn(1500);
				var time = 0;
				
				
				daynight(time)
				readtxt("test.txt")
				
			});
		</script>
		<style>
			#textcontainer{
				width: 300px;
				margin: auto;
				text-overflow: clip;
				display: none;
			}
			p{
				text-align: center;
				text-overflow: clip;
			}
			button{
				display: block;
				margin: 50px auto;
			}
		</style>
	</head>
	<body>
		<div id="textcontainer">
			<div id="textanimation">
				<p> 
					 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum nunc ac odio vulputate placerat. Vestibulum maximus maximus tortor, et iaculis neque finibus eget. Sed non rhoncus libero. Nulla sit amet lacinia augue, quis porta ex. Vestibulum ut ex tincidunt, faucibus turpis quis, egestas ligula. Aliquam congue sed ipsum et rhoncus. Ut id dolor et urna tempus euismod quis sed ipsum. Nam sapien nunc, viverra quis efficitur vitae, mattis sed velit. <br/>
				</p>
				<hr>
			</div>
		</div>
	</body>
</html>